# redis 内存淘汰
内存不够用时交换到磁盘

## 不淘汰，内存满了就直接报错
## 淘汰
### 针对设置过期时间的key淘汰
1. random
2. ttl：优先淘汰更早过期的key
3. lru：最久未使用的key
4. lfu：最少使用的key
### 针对所有数据淘汰
1. random
2. lru
3. lfu

### redis lru实现方案：非严格lru
- 每个对象增加一个最后访问时间
- 随机采样5个数据，取最后访问时间最久的

> 优势：不用维护一个大链表，访问时移动链表元素来更新
> 不足：缓存污染，若有大量缓存仅访问一次，则长时间占用内存，可用lfu来优化

### redis lfu实现方案
- 每个对象有最后访问时间，也有访问频率
- 不是访问次数而是访问频率，跟两次访问间隔时间有关，按间隔来衰减
- 然后再按一定概率来增加访问频率
